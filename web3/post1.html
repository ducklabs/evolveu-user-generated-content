<html>
  <head>
    <script></script>
  </head>
  <body>
    <header>
      <h1>Day 3: Accessing an API</h1>
      <h2>The POST</h2>
    </header>
    <main>
      <div style="padding: 25px;">
        Create New Message<br />
        <span
          >Message:
          <input id="messageText" type="text" />
        </span>
        <button
          style="background-color: green; color: white;"
          onclick="sendMessage()"
        >
          Submit
        </button>
      </div>
    </main>
    <footer></footer>
    <!--HERE WE WILL USE THE API TO SEND A POST UP TO THE SERVER-->
    <script>
      function getMessageText() {
        return document.getElementById("messageText").value;
      }

      function sendMessage() {
        const url = "http://localhost:3000/api/v2/addPost";
        const message = {
          messageText: getMessageText(),
          author: "Anonymous",
          messageDate: new Date().toISOString().substring(0, 10),
        };

        fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(message),
        })
          .then((response) => response.json())
          .then((data) => console.log(data));
      }
    </script>
  </body>
</html>
